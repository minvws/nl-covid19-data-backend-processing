# Introduction
The coronavirus dashboard gives up-to-date information about the development of the coronavirus in the Netherlands. It was launched 5 june 2020. Read more about the dashboard on: https://coronadashboard.rijksoverheid.nl/over.

With the information on the dashboard, early signs that the rate of infection is increasing can be picked up. This project describes the definitions and calculations on various indicators to that purpose. See https://coronadashboard.rijksoverheid.nl/verantwoording for even more information on data calculation and presentation for the corona dashboard.

In this section, you can find out which indicators the dashboard uses, where the numbers of these indicators originate from, why we’ve made certain design and tech choices in order to get to the figures that you see in the [dashboard](https://coronadashboard.rijksoverheid.nl/). 
<br></br>
<ins>Technical and functional requirements</ins> <br>
The backend was made in assignment of the Ministry of Healthcare and Sports of the Netherlands. We wanted to make a very robust application and hence chosen to export the data from the database in JSON format and to be made available for the front end application. The respective repository can be found [here](https://github.com/minvws/nl-covid19-data-dashboard). The requirements for the back-end and front-end are all according to the RIVM standards, since the requirement was to be able to migrate the Corona dashboard to the RIVM infrastructure. In addition, for the architecture design of the back-end we have chosen robustness over speed, since we wanted to minimize the loss of data integrity and minimize security risk. Hence, before the data is published online the data is checked by RIVM and the Ministery. 

For most figures, we simply take the source data and apply little to no transformations to it. At most, we would add an extra date or replace a date with its UNIX counterpart. However, for some indicators we need to make a calculation, e.g. to calculate the 3 day averages. In this section we try to explain as much as possible what we have done in that case. Furthermore, we have also made sure that you can also check the [source code](./main/sql/stored_procedures/). In addition to the source code, we have also supplied the locations where you can find the data yourself. For the data sources not available online, we have provided a [folder](./resources/) that contains the original source files. We provide these files as an example and will not be updated regularly. We are working on getting these sources available to the general public. In general, any user should be able to recreate the figures that are shown in the dashboard.


# Indicators
Indicators:
1. Intensive Care admissions (IC opnames) 
2. Hospital admissions (Ziekenhuis opnames) 
3. Hospital admissions per region (Ziekenhuis opnames per regio) 
4. Positive tested people (Positief geteste personen) 
5. Positive tested people per region (Positief geteste personen per regio) 
6. Positive tested per agegroup (Positief geteste personen per leeftijdscategorie) 
7. Increase in positive tested people per region (Toename positief geteste personen per regio)
8. Infectious people (Besmettelijke personen)
9. Reproduction (Reproductiegetal)
10. Nursinghomes: positive tested people (Verpleeghuizen: positief geteste personen)
11. Nursinghomes: deceased (Verpleeghuizen: sterfte)
12. Nursinghomes: locations - new (Verpleeghuizen: locaties - nieuw)
13. Nursinghomes: locations - total (Verpleeghuizen: locaties - totaal)
14. Suspicions General Practioners (Verdenkingen huisartsen)
15. Sewer Measurements (Rioolwater metingen; landelijk gemiddelde)
16. Sewer Measurements per region (Rioolwater metingen; gemiddeld per regio)
17. Sewer Measurements per Rioolwaterzuiveringsinstallatie (Rioolwater metingen per installatie)


| Indicators                                                                                        | Source                                                                            | Data Supplier     |Definition |
|----------                                                                                         |:-------------                                                                     |:-------           |------:|
|IC Recordings (IC Opnames)                                                                         |https://stichting-nice.nl/covid-19/public/new-intake/confirmed/                    |Stichting Nice     |The intensive-care admissions is the average of the increase per day over the last three days (not including today) - (Moving Average = t-1, t-2, t-3 / 3)<br><br> T-1 is used for the moving average, since the information at the source is registered from 00:00 and 00:00. We are showing a moving average since this allows us to show a consistent trend over time with low numbers, and to account for bias - for example with late or weekend registrations.<br><br>The content of the source link displays a value per day. This value indicates how many confirmed cases were recorded for each day. For the current day, this is updated throughout the day. The dashboard takes into account the last available records at the moment of extraction. The extraction takes place daily at around 14:30. |
|Hospital Admissions (Ziekenhuis opnames)                                                           |https://data.rivm.nl/covid-19/COVID-19_aantallen_gemeente_cumulatief.json          |RIVM               |The hospital admissions is the average of the increase per day over the last three days (including today) - (Moving Average = t-0, t-1, t-2 / 3). <br><br> RIVM publishes the file between 14:00 and 14:30. The file is extracted daily at 14:30. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Hospital_Admissions.sql).|
| Hospital Admissions per Region (Ziekenhuis opnames per regio)                                     |https://data.rivm.nl/covid-19/COVID-19_aantallen_gemeente_cumulatief.json          |RIVM               |The hospital admissions is the average of the increase per day over the last three days (including today) - (Moving Average = t-0, t-1, t-2 / 3) per safety region; The input-file does not include the reference to safety regions, so every GMCode (gemeente code) is first joined to the corresponding Safety Region. <br><br> RIVM publishes the file between 14:00 and 14:30. The file is extracted daily at 14:30.<br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Results_Per_Region.sql).|
| Positive Tested People (Positief geteste personen)                                                |https://data.rivm.nl/covid-19/COVID-19_aantallen_gemeente_cumulatief.json          |RIVM               |The dashboard takes into account the last available records at the moment of extraction. We’ve calculated an average for 100.000 inhabitants, so we are able to compare municipalities with different inhabitants level. The number of residents at 01-01-2020 is used for this . <br><br> The RIVM publishes the file between 14:00 and 14:30. The file is extracted daily at 14:30.<br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Positive_Tested_People.sql).|
| Positive Tested People per Age Group (Positief geteste personen per leeftijdscategory)            |https://data.rivm.nl/covid-19/COVID-19_casus_landelijk.json                        |RIVM               |The difference between the number of positively tested people in a certain age-group in comparison with yesterday (date is based on the field date_file); the age-groups are (0 tot 20, 20 tot 40, 40 tot 60, 60 tot 80, 80+); If the age-group is unknown or <50 these numbers are not taken into account; Every row in the input-table is an positively tested person, so a generic count is performed. <br><br> The RIVM publishes the file between 14:00 and 14:30. The file is extracted daily at 14:30.<br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Positive_Tested_People_Per_Age_Group.sql).|
| Increase in Postive Tested People per Region (Toename positief geteste personen per regio)        |https://data.rivm.nl/covid-19/COVID-19_aantallen_gemeente_cumulatief.json          |RIVM               |The absolute increase per day of positively tested people per region; The input-file does not include the reference to safety regions, so every GMCode (gemeente code) is first joined to the corresponding Safety Region. <br><br> RIVM publishes the file between 14:00 and 14:30. The file is extracted daily at 14:30.<br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Results_Per_Region.sql).|
| Reproduction Number (Reproductiecijfer)                                                           |https://data.rivm.nl/covid-19/COVID-19_reproductiegetal.json                       |RIVM               |The new numbers (low, avg, high) of the reproduction number are directly available in the input-file. <br><br> RIVM publishes the file on a weekly basis on Tuesday. The file is extracted on Tuesday at 14:30.<br><br> The code for this calculation can be found [here](main/sql/stored_procedures/R__Add_SP_Reproduction_Number.sql).|
| Infectious People (Besmettelijke personen)                                                        |https://data.rivm.nl/covid-19/COVID-19_prevalentie.json                            |RIVM               |The new numbers (low, avg, high) of infectious people are directly available in the input-file. <br> <br> RIVM publishes the file on a weekly basis on Tuesday. The file is extracted on Tuesday at 14:30.<br><br> The code for this calculation can be found [here](main/sql/stored_procedures/R__Add_SP_Infectious_People.sql).|
| Nursinghomes: positive tested people (Verpleeghuizen: positief geteste personen)                  |Aantal_besmette_VPH_locaties_per_datum_[TIMESTAMP].json                            |RIVM               |The amount of new nursinghomes with known infected people; the numbers of the day before publication. <br><br> RIVM emails the respective file on a daily basis, as soon as the figures are available. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Nursing_Homes_Totals.sql).
| Nursinghomes: Deceased (Verpleeghuizen: sterfte)                                                  |Sterfte_VPH_bewoners_per_overlijdensdatum_[TIMESTAMP].json                         |RIVM               |The increase per day of death in nursinghomes due to Corona; the numbers of the day before publication. <br><br> RIVM emails the respective file on a daily basis, as soon as the figures are available. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Nursing_Homes_Totals.sql).||
| Nursinghomes: Locations - New (Verpleeghuizen: locaties - nieuw)                                  |Totalen_VPH_bewoners_per_meldingsdatum_[TIMESTAMP].json                            |RIVM               |The amount of nursinghomes with newly tested infected people; the numbers of the day before publication.<br><br> RIVM emails the respective file on a daily basis, as soon as the figures are available. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Nursing_Homes_Totals.sql).
| Nursinghomes: Locations - Total (Verpleeghuizen: locaties - totaal)                               |Totalen_VPH_bewoners_per_meldingsdatum_[TIMESTAMP].json                            |RIVM               |The total amount of nursinghomes with known infected people; the numbers of the day before publication.<br><br> RIVM emails the respective file on a daily basis, as soon as the figures are available. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Nursing_Homes_Totals.sql).| 
| Suspicions General Practitioners (Verdenkingen huisartsen)                                        |Nivel-verdenkingen-COVID-19.txt                                                    |Nivel              |Weekly value, the value is already divided by 100.000 (x/100000). Nivel collects data from all the general practicioners about Corona cases. This values represent the amount of people per 100.000 where a general practisioner thinks the person has Corona. <br><br> Nivel emails this file on Tuesday, as soon as the figures are available. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Suspicions_General_Practitioners.sql).|
| Sewer Measurements (Rioolwater metingen)                                                          |COVID-19_rioolwaterdata.csv                                         |RIVM               |Weekly value. The average number nation-wide of virus-particles found in a ml of sewage. <br><br> RIVM emails the respective file on Tuesday, as soon as the figures are available. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Sewer_Measurements.sql).
| Sewer Measurements per region (Rioolwater metingen)                                               |COVID-19_rioolwaterdata.csv                                         |RIVM               |Weekly value. The average number per security-region of virus-particles found in a ml of sewage. Not all sewer treatment plants can directly be linked to a security region. The sewer treatment plant is coupled to the region which contributes most to the sewer-installation, this number is available in the inputted source as 'PERCENTAGE_IN_SECURITY_REGION'. <br><br> RIVM emails the respective file on Tuesday, as soon as the figures are available. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Sewer_Measurements_Per_Region.sql).
| Sewer Measurements per region (Rioolwater metingen)                                               |COVID-19_rioolwaterdata.csv                                         |RIVM               |The virus-particles found in a ml of sewage at a specific sewer treatment plant. Not all sewer treatment plants can directly be linked to a security region. The sewer treatment plant is coupled to the region which contributes most to the sewer-installation, this number is available in the inputted source as 'PERCENTAGE_IN_SECURITY_REGION'. <br><br> RIVM emails the respective file on Tuesday, as soon as the figures are available. <br><br> The code can be found [here](main/sql/stored_procedures/R__Add_SP_Sewer_Measurements_Per_RWZI.sql).

## Static data

Two static data files are used in combination with the above transactional data. 
1. The number of citizens per security region; these numbers originate from 01-01-2020. In the current version, this will not (yet) get updated on a regular basis.
2. A list of which municipalities belong to a specific security region. This is currently a static data set, which is not updated.
3. A list of the combination between the code and the name of the sewage treatment plant (RWZI_AWZI_CODE and RWZI_AWZI_NAME).

## Changes in definitions

| Indicators                                                                                    |     date          |  change |
|----------                                                                                     |:-------------:    |------:|
| Hospital Admissions (Ziekenhuis opnames)                                                      |  04-06-2020       | The input file changed from COVID-19_casus_landelijk to COVID-19_aantallen_gemeente_cumulatief, due to more accurate admissions days. An admission day is when a bed is reserved for a patient on a specific day. We’ve also chosen to only report confirmed cases (value = 0) since a lot of Covid-19 suspicions (value = 1) at the IC don’t turn out to be infectious people|
| Nursinghomes: Locations New and Total (Verpleeghuizen: locaties Nieuw en totaal)              |  24-06-2020       | Newly added Indicator, data was not previously available. |
| Increase postive tested people per region (Toename positief geteste personen per regio)       |  24-06-2020       | Newly added Indicator, data was not previously available. |
| Nursinghomes data (Vepleeghuis data)                                                          |  24-06-2020       | Added additional filter to the view statement of nursing home totals, to ensure that only up to T-1 is shown, |
| Suspicions General Practitioners (Verdenkingen huisartsen)                                    |  03-07-2020       | Newly added Indicator, data was not previously available. |
| Sewer Measurements (Rioolwater metingen)                                                      |  03-07-2020       | Newly added Indicator, data was not previously available. |
| Sewer Measurements; national, per region and per RWZI (Rioolwater metingen)                   |  18-08-2020       | Newly added Indicators, data was not previously available on this detailed level. |
